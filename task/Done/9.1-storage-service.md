# Task 9.1: Storage Service

**Epic**: Epic 9: Persistence & Storage

## Task Details

- [x] Create `StorageService` class/module
- [x] Implement `saveAppConfig(config: AppConfig)`
- [x] Implement `loadAppConfig(): AppConfig | null`
- [x] Implement `clearAppConfig()` for reset
- [x] Handle localStorage quota errors
- [x] Implement data migration if needed

## File Location

Place all files for this task inside `src/storage/` (feature folder for persistence).
Example: `src/storage/storageService.ts`

## Completion Summary

**Date Completed**: 2026-02-25

**Work Done**:

- Created `apps/pictho-app/src/storage/storageService.ts` with a `StorageService` class (singleton `storageService`)
- Implemented `saveAppConfig(config)` – serialises the config as `{ version, config }` JSON envelope in `localStorage`
- Implemented `loadAppConfig()` – deserialises and validates the envelope; returns `null` for missing/corrupt/future-version data
- Implemented `clearAppConfig()` – removes the key from `localStorage`
- Quota-exceeded errors (and any other localStorage exceptions) are caught and logged; the app never crashes
- Schema versioning (`SCHEMA_VERSION = 1`) and a `migrate()` function make future breaking changes easy to handle
- Created `apps/pictho-app/src/storage/storageService.test.ts` with 14 unit tests covering all three methods, error cases, and migration logic

**Notes**:

- The `storage/` feature folder follows the existing feature-folder convention; no type-based folders were introduced
- No external dependencies were added – the service uses only native `localStorage` and `JSON`
